

ifeq ($(NEOTONIC_ROOT),)
NEOTONIC_ROOT = ../../
endif

include $(NEOTONIC_ROOT)rules.mk

HDFTEST_EXE = hdftest
HDFTEST_SRC = hdftest.c
HDFTEST_OBJ = $(HDFTEST_SRC:%.c=%.o)

LISTDIRTEST_EXE = listdir_test
LISTDIRTEST_SRC = listdir_test.c
LISTDIRTEST_OBJ = $(LISTDIRTEST_SRC:%.c=%.o)

HDFCOPYTEST_EXE = hdf_copy_test
HDFCOPYTEST_SRC = hdf_copy_test.c
HDFCOPYTEST_OBJ = $(HDFCOPYTEST_SRC:%.c=%.o)


CFLAGS += -I$(NEOTONIC_ROOT)/util
LIBS += -L$(LIB_DIR) -lneo_utl 

TARGETS = $(HDFTEST_EXE) $(LISTDIRTEST_EXE) $(HDFCOPYTEST_EXE)

all: $(TARGETS)

$(HDFTEST_EXE): $(HDFTEST_OBJ) $(NTR_LIB)
	$(LD) $@ $(HDFTEST_OBJ) $(LIBS)

$(LISTDIRTEST_EXE): $(LISTDIRTEST_OBJ) $(NTR_LIB)
	$(LD) $@ $(LISTDIRTEST_OBJ) $(LIBS)

$(HDFCOPYTEST_EXE): $(HDFCOPYTEST_OBJ) $(NTR_LIB)
	$(LD) $@ $(HDFCOPYTEST_OBJ) $(LIBS) -lefence

clean:
	$(RM) *.o

distclean:
	$(RM) $(TARGETS) *.o
